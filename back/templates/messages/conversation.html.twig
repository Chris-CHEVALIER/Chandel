{% extends 'base.html.twig' %}

{% block title %}Conversation{% endblock %}

{% block body %}
<div style="max-width: 700px; margin: 2rem auto; background: #fff; border-radius: 16px; box-shadow: 0 2px 12px #0002; padding: 2rem; display: flex; flex-direction: column; min-height: 70vh;">
    <h2 style="margin-bottom: 1.5rem;">Conversation avec {{ conversation.user1 == user ? conversation.user2.username : conversation.user1.username }}</h2>
    <div style="flex: 1 1 auto; overflow-y: auto; margin-bottom: 2rem;">
        {% for msg in messages %}
            <div style="margin-bottom: 1.2rem; display: flex; {{ msg.user == user ? 'justify-content: flex-end;' : 'justify-content: flex-start;' }}">
                <div style="max-width: 60%; background: {{ msg.user == user ? '#d2b97f' : '#f7f7f7' }}; color: #222; padding: 0.8rem 1.2rem; border-radius: 16px; box-shadow: 0 1px 4px #0001;">
                    <div style="font-size: 0.95rem; margin-bottom: 0.2rem; font-weight: bold;">{{ msg.user.username }}</div>
                    <div>{{ msg.content }}</div>
                    <div style="font-size: 0.8rem; color: #888; text-align: right; margin-top: 0.3rem;">{{ msg.createdAt ? msg.createdAt|date('d/m/Y H:i') : '' }}</div>
                </div>
            </div>
        {% else %}
            <div style="color: #888;">Aucun message pour le moment.</div>
        {% endfor %}
    </div>
    <form method="post" style="display: flex; gap: 1rem; align-items: flex-end;">
        <textarea name="content" rows="2" required style="flex: 1 1 auto; border-radius: 8px; border: 1px solid #ccc; padding: 0.7rem; resize: none;"></textarea>
        <button type="submit" style="background: #d2b97f; color: #fff; border: none; border-radius: 8px; padding: 0.7rem 1.5rem; font-weight: bold; cursor: pointer;">Envoyer</button>
    </form>
</div>
{% endblock %} 